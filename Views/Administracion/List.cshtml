
@{
    ViewBag.Title = "Sitios_List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Sitios_List</h2>
<script src="~/Scripts/jquery-3.4.0.min.js"  type="text/javascript"></script>
<script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js" defer></script>
<script src="~/Scripts/DataTables-1.12.0/js/jquery.dataTables.min.js"  type="text/javascript"></script>
<script src="~/Scripts/DataTables-1.12.0/js/jquery.dataTables.min.js" type="text/javascript"></script>


<div>
    <table id="tblListaSitios"></table>
    @*<table class="table table-striped table-hover table-condensed" style="width: 100%" id="dataTableSitios">
            <thead class="dark-blue" style="color: white">
                <tr>
                    <th>Nombre</th>
                    <th>Descripcion</th>
                    <th>Url</th>
                    <th>Tipo sitio </th>
                    <th>Modulo</th>
                    <th>Sitio padre</th>
                    <th>Propiedades</th>
                </tr>
            </thead>

        </table>*@
</div>
<script src="~/Theme/vendor/jquery/jquery.js"></script>
<script src="~/Theme/vendor/jquery/jquery.min.js"></script>

<script>
    var tablaSitios;
    $(document).ready(function () {
        console.log("si")
        CargarListaSitios();

    });

    function CargarListaSitios() {
        tablaSitios = $("#tblListaSitios").DataTable({
            dom: "<'card-header'<'.titleSegui'><'d-flex justify-content-md-end'fB>>" + "<'card-body p-0'tr>" + "<'card-footer'ip>",
            processing: true,
            destroy: true,
            info: true,
            paging: true,
            lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "Todos"]],
            columnDefs: [
                { targets: [0, 1, 2, 3, 4, 5, 6], searchable: false, orderable: false }
            ],
            lengthChange: false,
            ajax: {
                url: "../Sitios/GetListSitios",
                type: "POST",
                dataType: "json",
                data: null,
                //beforeSend: function () {
                //    $(".loader-1").show();
                //},
                //complete: function () {
                //    $(".loader-1").hide();

                //},
            },
            columns: [
                { data: "Id", title: "Id", name: "Id" },
                { data: "Nombre", title: "Nombre", name: "Nombre" },
                { data: "Descripcion", title: "Descripcion", name: "Descripcion" },
                { data: "URL", title: "URL", name: "URL" },
                { data: "IdModulo", title: "IdModulo", name: "IdModulo" },

            ],
            //language: {
            //    "url": "../Plugins/DataTables/js/Spanish.json"
            //},
            buttons: [



                { extend: 'excel', className: 'btn btn-success', text: '', action: function () { getExcel() }, init: function (api, node, config) { $(node).removeClass('btn-secondary') } }
            ],
            order: [[1, "asc"]]
        });
    }

    //function CargarListaSitios() {
    //    $.ajax({
    //        type: "POST",
    //        contentType: "application/json; charset=utf-8",
    //        url: "../Sitios/GetListSitios",
    //        data: null,
    //        dataType: "json",
    //        async: true,
    //        success: OnSuccessCargarListaSitios,
    //        failure: function (response) {
    //            alert(response.d);
    //        },
    //        error: function (result) {
    //            console.log('Error - GetListSitios')
    //        }
    //    });
    //}



    //function OnSuccessCargarListaSitios(response) {
    //    $('#dataTableSitios').DataTable({
    //        "lengthMenu": [[5, 10, 25, -1], [5, 10, 25, "Todos"]],
    //        "searching": true,
    //        "paging": true,
    //        "info": false,
    //        "lengthChange": true,
    //        "bDestroy": true,
    //        "language": {
    //            "search": "Buscar:",
    //            "lengthMenu": "Mostrar _MENU_ registos por página",
    //            "zeroRecords": "No existen datos disponibles",
    //            "info": "Página _PAGE_ de _PAGES_",
    //            "infoEmpty": "No existen datos disponibles",
    //            "infoFiltered": "(Filtro realizado en un total de _MAX_ registros.)",
    //            "paginate": {
    //                "previous": "Anterior",
    //                "next": "Siguiente"
    //            }
    //        },
    //        data: response.d,
    //        columns: [
    //            { 'data': 'Id' },
    //            { 'data': 'Nombre' },
    //            { 'data': 'Descripcion'},
    //            { 'data': 'URL' },
    //            { 'data': 'NombreTipoSitio' },
    //            { 'data': 'IdModulo' },
    //            { 'data': 'IdSubMenuPadre' },
    //            { 'data': 'IdTipoSitio' }],

    //        //columnDefs: [
    //        //    { "className": "dt-center", "targets": "_all" }
    //        //],
    //    });
    //}


</script>